# UI Improvements

Generated by frontend-craft agent audit. Check off items as they are completed.

## High Priority

- [x] **Accessibility** — File upload drop zone has no `role`, `aria-describedby` for constraints, or focus-visible ring → Add `role="button"`, `focus-visible` outline, and `aria-describedby` pointing to a constraint hint
- [x] **Accessibility** — Delete confirmation renders new buttons with no focus management — AT users may miss them → Move focus to Confirm/Cancel on render, or use a proper `<dialog>` with focus trapping
- [x] **Accessibility** — `ThinkingAnimation` never announces completion — AT users don't hear when results are ready → Add a polite live region announcement on the dashboard when analysis finishes
- [x] **Accessibility** — Green action (`#22c55e`) and yellow action (`#eab308`) buttons with white text fail WCAG AA contrast (~2.6:1 and ~1.7:1) → Darken button backgrounds or use black text on yellow to meet 4.5:1
- [x] **UX** — No Cancel button in `ExecutiveSummary` edit mode — edits can't be discarded → Add a Cancel button that restores `editText` to the saved `summary`

## Medium Priority

- [ ] **Accessibility** — `ExecutiveSummary` textarea uses `aria-label` that duplicates the visible heading rather than `aria-labelledby` → Replace with `aria-labelledby` pointing to the section heading's `id`
- [ ] **Accessibility** — Edit buttons have no context ("Edit" alone is ambiguous for screen readers) → Add `aria-label="Edit chart type"` / `"Edit executive summary"` to each
- [ ] **Accessibility** — `SaveButton` "Saved!" state has no live-region announcement for AT users → Wrap button text in `aria-live="polite"` span or add a visually hidden live region
- [ ] **Accessibility** — Exported HTML report has no `<main>` landmark, no accessible label on `<canvas>`, and no data table companion → Add `<main>`, `aria-label` on `<canvas>`, and a visually hidden data table in the export template
- [ ] **UX** — Drop zone looks draggable but has no drag-and-drop implementation → Implement `onDragOver`/`onDrop` handlers to accept dropped CSV files
- [ ] **UX** — `ChartDisplay` edit mode auto-closes on `select` change with no confirmation step → Separate selection from confirmation with an explicit Apply/Done button
- [ ] **UX** — Delete has no undo — results are permanently lost after confirmation → Add a brief undo toast (5s window) or more prominent warning before discarding
- [ ] **UX** — Raw API error messages surfaced verbatim to users → Map known errors to user-friendly messages
- [ ] **Performance** — `ChartJS.register(...)` called at module scope — runs on every import → Move registration into `useEffect` or lazy-load `ChartDisplay`
- [ ] **Performance** — All Chart.js element types registered unconditionally regardless of active chart type → Register only elements required by the active `chartType`
- [ ] **Performance** — Exported HTML loads Chart.js from CDN with only a major-version pin (`@4`) → Pin to an exact version (e.g. `chart.js@4.4.7`) to guarantee consistent rendering
- [ ] **Design** — `<h3>` used for both dashboard panel headings, skipping `<h2>` — broken heading hierarchy → Use `<h2>` for "Chart" and "Executive Summary" headings
- [ ] **Design** — Focus indicators inconsistent across the app — cards use browser defaults → Create a shared `focus-ring` Tailwind utility and apply it to all interactive elements
- [ ] **Component Structure** — Dashboard state (`chartType`, `summary`) lost on refresh/navigation with no persistence → Persist working state to `localStorage` keyed by file metadata

## Low Priority

- [ ] **Accessibility** — No skip-navigation link from `<Header>` to `#main-content` → Add a skip-nav link across the entire app
- [ ] **UX** — No indication of the current chart type outside edit mode → Display chart type as subtitle or badge on the card when not editing
- [ ] **UX** — Static "5–15 seconds" estimate with no elapsed-time feedback if request stalls → Show elapsed timer after ~10s or surface a timeout error after ~30s
- [ ] **UX** — No contextual message after delete cycle ("Upload a new file to start again") → Update heading or add a contextual subtitle after delete
- [ ] **Performance** — `SaveButton` appends/removes a DOM anchor unnecessarily → Use detached anchor click pattern without appending to `document.body`
- [ ] **Performance** — Generic meta description in `layout.tsx` → Improve for SEO
- [ ] **Design** — Button size scale inconsistent between top-level actions and in-card controls → Establish a consistent button sizing scale in the design system
- [ ] **Design** — Desktop-only app but no minimum-width enforcement or viewport warning on small screens → Add a `< 768px` banner or enforce `min-width` on `<body>`
- [ ] **Component Structure** — `FileUpload.tsx` handles three view states in one component — will become hard to maintain → Extract `UploadView` and `ThinkingView` as separate components
- [ ] **Component Structure** — Inline SVG icon paths duplicated across multiple components → Extract into a shared `Icon` component or `src/components/icons.tsx`
- [ ] **Component Structure** — `ExecutiveSummary` `editText` can go stale if parent updates `summary` externally → Sync `editText` with `summary` prop via a `useEffect` dependency
